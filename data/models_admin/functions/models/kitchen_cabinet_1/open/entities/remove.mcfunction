#
execute as @s[y_rotation=135..-135] as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} as @e[type=minecraft:block_display,tag=kitchen_cabinet_1_open,distance=0..5,sort=nearest,limit=21] at @s run setblock ~0.50 ~ ~0.50 minecraft:air
execute as @s[y_rotation=-135..-45] as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} as @e[type=minecraft:block_display,tag=kitchen_cabinet_1_open,distance=0..5,sort=nearest,limit=21] at @s run setblock ~-0.50 ~ ~0.50 minecraft:air
execute as @s[y_rotation=-45..45] as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} as @e[type=minecraft:block_display,tag=kitchen_cabinet_1_open,distance=0..5,sort=nearest,limit=21] at @s run setblock ~-0.50 ~ ~-0.50 minecraft:air
execute as @s[y_rotation=45..135] as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} as @e[type=minecraft:block_display,tag=kitchen_cabinet_1_open,distance=0..5,sort=nearest,limit=21] at @s run setblock ~0.50 ~ ~-0.50 minecraft:air

#
execute as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} as @e[type=minecraft:block_display,tag=kitchen_cabinet_1_open,distance=0..5,sort=nearest,limit=21] at @s run kill @s
execute as @e[type=minecraft:marker,distance=0..5,tag=model_command_history] at @s if data entity @s {data:{model_block_redo:["redo_kitchen_cabinet_1_open"]}} run data modify entity @s[nbt=!{data:{model_block_undo:["undo_kitchen_cabinet_1_open"]}}] data.model_block_undo insert 0 value "undo_kitchen_cabinet_1_open"